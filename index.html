<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <style type="text/css">
      body { width: 66%; margin: 0 auto; }
      h1 { text-align: center; }
      p.intro { font-style: italic; }
      q { font-style: italic; }
      fieldset { margin: 1em; margin-bottom: 1.5em; padding: 1em; }
        legend { font-weight: bold; }
          legend span { cursor: pointer; color: blue; }
        fieldset p { margin: 0; }
          fieldset p.tip { font-style: italic; margin-top: 0.5em; }
      div.para { margin: 0.3em 0; }
      button { font-size: 1.5em; font-weight: bold; padding: 5px 1em; display: block; margin: 1em auto; cursor: pointer; }
      #status { margin: 0; text-align: center; color: blue; }
      #progressWr { margin-top: 5px; }
        #progress { background: blue; height: 4px; }
      #log { margin: 1em; padding: 5px 1em; border-left: 3px solid silver; overflow: auto; height: 15em; }
        #log .info { color: blue; }
        #log .end { border-bottom: 1px solid silver; padding-bottom: 2px; margin-bottom: 5px; }
        #log .success { color: green; }
        #log .error { color: maroon; }
    </style>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script type="text/javascript" src="uploader.js"></script>
  </head>
  <body>
    <h1>Booru Mass-Uploader</h1>
    <p class="intro">This script allows you to mass-upload images to imageboard sites running *booru engine. You select a number of files and they're sent to the website along with the info which is retrieved from their file names.</p>

    <fieldset style="padding: 2px 1em">
      <legend>
        For correct upload all files must be named according to the format
        <span onclick="$('#fileNamesTip').toggle()">
          [+/-]
        </span>
      </legend>

      <div id="fileNamesTip" style="display: none; margin: 1em">
        <p>
          Example file name: <q>q nagisa floor tagme Filename.jpg</q>, where:
        </p>
          <ul>
            <li> <q>q</q> is the image's rating (Safe, Questionable, Explicit), </li>
            <li> then space - don't forget about it! </li>
            <li> then go all tags for this image. Here they are 3:
                 <q>nagisa</q>, <q>floor</q> &amp; <q>tagme</q>. </li>
            <li> finally, goes the original filename, which is ignored, but can be used to avoid filename collisions when having identical tag sets.</li>
          </ul>

        <p>The behaviour of the uploader when no rating character was found or was wrong is defined by the options below.</p>
        <p>According to those options some parts of file name pattern can be ignored, e.g. if rating is selected as <q>Force Safe</q> then rating letter won't be used (i.e. ignored even if present). If you have both Rating &amp; Tags options set to <q>Force</q> then names are not used at all and pictures can have any file names.</p>
      </div>
    </fieldset>

    <fieldset>
      <legend>Image ratings</legend>

      <div class="para">
        <input type="radio" name="rating-when" id="forceRating" checked="checked"/>
          <label for="forceRating"><strong>Force</strong> all ratings regardless of file name.</label>
        <input type="radio" name="rating-when" id="ratingAsDefault"/>
          <label for="ratingAsDefault">Only set rating if failed to determine it from the file name.</label>
      </div>

      <div class="para">
        <input type="radio" name="rating" id="setSafe" checked="checked" />
          <label for="setSafe">Safe</label>
        <input type="radio" name="rating" id="setQuest"/>
          <label for="setQuest">Questionable</label>
        <input type="radio" name="rating" id="setExplicit" />
          <label for="setExplicit">Explicit</label>
      </div>
    </fieldset>

    <fieldset>
      <legend>Tagging</legend>

      <input type="radio" name="tag-when" id="tagsFromNames"/>
        <label for="tagsFromNames">Set tags based on image file names alone.</label>
      <input type="radio" name="tag-when" id="forceTags" />
        <label for="forceTags">Ignore file names, <strong>force</strong> tags of all images.</label>

      <br />

      <input type="radio" name="tag-when" id="addTags"  checked="checked" />
        <label for="addTags">In addition to tags from image file names also add these tags to each of them.</label>

      <br />

      <div id="tagsWr" style="display: none; margin-top: 1em">
        Tag list (separate with spaces):
        <input type="text" id="tags" style="width: 70%" />
      </div>

      <p class="tip">Tags will be auto- cleaned from spaces, have duplicates removed and sorted.</p>
    </fieldset>

    <fieldset>
      <legend>If the booru forbids anonymous uploading or you want to upload to your account</legend>

      Enter your user ID: <input type="text" id="userID" />,
      and the ticket: <input type="text" id="ticket" style="width: 23em" />

      <p class="tip">
        This info can be retrieved from your cookies. How?
        <a rel="subsection" href="howto-auth.html" target="_blank">Here's the guide</a>.
        And no, I don't collect your info.
      </p>
    </fieldset>

    <fieldset style="padding: 2px 1em">
      <legend>
        Other settings
        <span onclick="$('#otherSettings').toggle();">
          [+/-]
        </span>
      </legend>

      <div id="otherSettings" style="display: none; margin: 1em">
        <div class="para">
          Set Title field of each image to its original filename (if present)
            <input type="checkbox" id="title"/>
        </div>
        <div class="para">
          Set Source field of each image to this:
             <input type="text" id="source" value="Booru mass uploader" />
        </div>
      </div>
    </fieldset>

    <div class="para">
      Images:
        <input type="file" id="files" multiple="true" />
        (all files with MIME other than <tt>image/*</tt> or extension other than <tt>jpe?g/gif/png/bmp</tt> will be skipped).
    </div>

    <div class="para" id="uploadUrlWr">
      Posting form URL:
        <input type="text" id="uploadURL" style="width: 25em"
               value="http://your-booru/index.php?page=post&amp;s=add" />
        (usually it looks <acronym title="http://your-booru/index.php?page=post&amp;s=add">like this</acronym>).
    </div>

    <button id="submit" onclick="FilesSelected( $('files').files );">Upload!</button>

    <h2 id="status"></h2>
    <div id="progressWr"> <div id="progress" style="width: 0"></div> </div>
    <div id="log" style="display: none"></div>

    <script type="text/javascript">
      if (typeof FileReader == 'function') { $hide('ff36_Warning'); }

      var uploadURL = location.search.substr(1);
        if (uploadURL) {
          uploadURL = decodeURIComponent(uploadURL);
          if (uploadURL.indexOf('http://') == -1) { uploadURL = decodeURIComponent(uploadURL); }
          $set('uploadURL', uploadURL);
          $('otherSettings').appendChild( $('uploadUrlWr') );
        }

      RestoreLastSettingsFor( $get('uploadURL') );

      if (!GetCookie('fileNamesTipShown')) {
        $show('fileNamesTip');
        SetCookie('fileNamesTipShown', true, 48);
      }

      setInterval(function () {
        $('submit').disabled = $('files').files.length == 0 || upOptions.running;
        $style( 'tagsWr', 'display', $('tagsFromNames').checked ? 'none' : 'block' );
      }, 200);
    </script>
  </body>
</html>
        
